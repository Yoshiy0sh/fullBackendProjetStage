<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mes Demandes - NexLoan</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation Header -->
    <header class="header">
        <div class="container">
            <div class="nav-wrapper">
                <div class="logo">
                    <i class="fas fa-home logo-icon"></i>
                    <span class="logo-text">NexLoan</span>
                </div>

                <nav class="nav-menu">
                    <ul>
                        <li><a href="/">Accueil</a></li>
                        <li><a href="/dashboard">Tableau de bord</a></li>
                        <li><a href="/dashboard/documents">Mes Documents</a></li>
                        <li><a href="/dashboard/demandes" class="active">Mes Demandes</a></li>
                        <li><a href="/#contact">Contact</a></li>
                    </ul>
                </nav>

                <div class="header-buttons">
                    <div class="user-menu">
                        <button class="user-menu-toggle" onclick="toggleUserMenu()">
                            <i class="fas fa-user-circle"></i>
                            <span><%= firstNameMyLoans %></span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="user-dropdown" id="userDropdown">
                            <a href="/profile" class="dropdown-item">
                                <i class="fas fa-user"></i>
                                Mon Profil
                            </a>
                            <a href="/dashboard/documents" class="dropdown-item">
                                <i class="fas fa-file-alt"></i>
                                Mes Documents
                            </a>
                            <div class="dropdown-divider"></div>
                            <form action="/logout" method="POST" style="margin: 0;">
                                <button type="submit" class="dropdown-item logout-btn">
                                    <i class="fas fa-sign-out-alt"></i>
                                    Déconnexion
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Demandes Content -->
    <main class="demandes-main">
        <div class="container">
            <div class="demandes-header">
                <div class="demandes-breadcrumb">
                    <a href="/dashboard">Tableau de bord</a>
                    <i class="fas fa-chevron-right"></i>
                    <span>Mes Demandes</span>
                </div>
                <h1>Mes Demandes</h1>
                <p>Suivez l'état d'avancement de vos demandes de financement</p>
            </div>

            <% if (successMessage) { %>
                <div class="success-message">
                    <i class="fas fa-check-circle"></i>
                    <%= successMessage %>
                </div>
            <% } %>

            <% if (errorMessage) { %>
                <div class="error-message">
                    <i class="fas fa-exclamation-circle"></i>
                    <%= errorMessage %>
                </div>
            <% } %>

            <div class="demandes-content">
                <!-- Demandes en cours -->
                <div class="demandes-section">
                    <div class="section-header">
                        <h2>
                            <i class="fas fa-clock"></i>
                            Demandes en cours
                            <% if (currentLoans.length > 0) { %>
                                <span class="count-badge"><%= currentLoans.length %></span>
                            <% } %>
                        </h2>
                        <p>Vos demandes actuellement en traitement</p>
                    </div>

                    <% if (currentLoans.length > 0) { %>
                        <div class="demandes-grid">
                            <% currentLoans.forEach(function(loan) { %>
                                <div class="demande-card en-cours">
                                    <div class="demande-header">
                                        <div class="demande-number">
                                            <i class="fas fa-file-alt"></i>
                                            <%= loan.loanNumber %>
                                        </div>
                                        <div class="demande-status">
                                            <span class="status-badge status-en-cours">
                                                <i class="fas fa-clock"></i>
                                                En cours
                                            </span>
                                        </div>
                                    </div>

                                    <div class="demande-content">
                                        <div class="demande-info">
                                            <div class="info-item">
                                                <span class="label">Type de projet</span>
                                                <span class="value"><%= loan.typeProjet || 'Non spécifié' %></span>
                                            </div>
                                            <div class="info-item">
                                                <span class="label">Montant demandé</span>
                                                <span class="value"><%= loan.projectAmount ? loan.projectAmount.toLocaleString('fr-FR') + ' €' : 'Non spécifié' %></span>
                                            </div>
                                            <div class="info-item">
                                                <span class="label">Date de soumission</span>
                                                <span class="value"><%= loan.updatedAt %></span>
                                            </div>
                                        </div>

                                        <div class="demande-progress">
                                            <div class="progress-bar">
                                                <div class="progress-fill" style="width: 40%"></div>
                                            </div>
                                            <div class="progress-steps">
                                                <div class="step completed">
                                                    <i class="fas fa-check"></i>
                                                    <span>Soumise</span>
                                                </div>
                                                <div class="step active">
                                                    <i class="fas fa-search"></i>
                                                    <span>Analyse</span>
                                                </div>
                                                <div class="step">
                                                    <i class="fas fa-handshake"></i>
                                                    <span>Négociation</span>
                                                </div>
                                                <div class="step">
                                                    <i class="fas fa-check-circle"></i>
                                                    <span>Finalisation</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="demande-actions">
                                        <button class="btn btn-outline-primary btn-sm" onclick="showDemandeDetails('<%= loan._id %>')">
                                            <i class="fas fa-eye"></i>
                                            Voir détails
                                        </button>
                                        <a href="mailto:support@nexloan.fr?subject=Demande <%= loan.loanNumber %>" class="btn btn-outline-secondary btn-sm">
                                            <i class="fas fa-envelope"></i>
                                            Contacter
                                        </a>
                                    </div>
                                </div>
                            <% }); %>
                        </div>
                    <% } else { %>
                        <div class="empty-state">
                            <div class="empty-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <h3>Aucune demande en cours</h3>
                            <p>Vous n'avez actuellement aucune demande de financement en cours de traitement.</p>
                            <a href="/demande" class="btn btn-primary">
                                <i class="fas fa-plus"></i>
                                Nouvelle demande
                            </a>
                        </div>
                    <% } %>
                </div>

                <!-- Demandes terminées -->
                <div class="demandes-section">
                    <div class="section-header">
                        <h2>
                            <i class="fas fa-history"></i>
                            Historique des demandes
                            <% if (demandesTerminees.length > 0) { %>
                                <span class="count-badge"><%= demandesTerminees.length %></span>
                            <% } %>
                        </h2>
                        <p>Vos demandes précédentes et leur résultat</p>
                    </div>

                    <% if (demandesTerminees.length > 0) { %>
                        <div class="demandes-grid">
                            <% demandesTerminees.forEach(function(demande) { %>
                                <div class="demande-card <%= demande.status %>">
                                    <div class="demande-header">
                                        <div class="demande-number">
                                            <i class="fas fa-file-alt"></i>
                                            <%= demande.dossierNumber %>
                                        </div>
                                        <div class="demande-status">
                                            <% if (demande.status === 'acceptee') { %>
                                                <span class="status-badge status-acceptee">
                                                    <i class="fas fa-check-circle"></i>
                                                    Acceptée
                                                </span>
                                            <% } else if (demande.status === 'refusee') { %>
                                                <span class="status-badge status-refusee">
                                                    <i class="fas fa-times-circle"></i>
                                                    Refusée
                                                </span>
                                            <% } else if (demande.status === 'annulee') { %>
                                                <span class="status-badge status-annulee">
                                                    <i class="fas fa-ban"></i>
                                                    Annulée
                                                </span>
                                            <% } %>
                                        </div>
                                    </div>

                                    <div class="demande-content">
                                        <div class="demande-info">
                                            <div class="info-item">
                                                <span class="label">Type de projet</span>
                                                <span class="value"><%= demande.typeProjet || 'Non spécifié' %></span>
                                            </div>
                                            <div class="info-item">
                                                <span class="label">Montant demandé</span>
                                                <span class="value"><%= demande.montant ? demande.montant.toLocaleString('fr-FR') + ' €' : 'Non spécifié' %></span>
                                            </div>
                                            <div class="info-item">
                                                <span class="label">Date de soumission</span>
                                                <span class="value"><%= demande.submissionDate %></span>
                                            </div>
                                            <% if (demande.updatedAt) { %>
                                                <div class="info-item">
                                                    <span class="label">Date de finalisation</span>
                                                    <span class="value"><%= new Date(demande.updatedAt).toLocaleDateString('fr-FR') %></span>
                                                </div>
                                            <% } %>
                                        </div>

                                        <% if (demande.status === 'acceptee') { %>
                                            <div class="demande-result success">
                                                <i class="fas fa-check-circle"></i>
                                                <div>
                                                    <h4>Demande acceptée</h4>
                                                    <p>Félicitations ! Votre demande a été approuvée.</p>
                                                </div>
                                            </div>
                                        <% } else if (demande.status === 'refusee') { %>
                                            <div class="demande-result error">
                                                <i class="fas fa-times-circle"></i>
                                                <div>
                                                    <h4>Demande refusée</h4>
                                                    <p>Votre demande n'a pas pu être acceptée. Contactez-nous pour plus d'informations.</p>
                                                </div>
                                            </div>
                                        <% } %>
                                    </div>

                                    <div class="demande-actions">
                                        <button class="btn btn-outline-primary btn-sm" onclick="showDemandeDetails('<%= demande.id %>')">
                                            <i class="fas fa-eye"></i>
                                            Voir détails
                                        </button>
                                        <% if (demande.status === 'acceptee') { %>
                                            <button class="btn btn-outline-secondary btn-sm">
                                                <i class="fas fa-download"></i>
                                                Télécharger
                                            </button>
                                        <% } %>
                                    </div>
                                </div>
                            <% }); %>
                        </div>
                    <% } else { %>
                        <div class="empty-state">
                            <div class="empty-icon">
                                <i class="fas fa-history"></i>
                            </div>
                            <h3>Aucun historique</h3>
                            <p>Vous n'avez pas encore d'historique de demandes terminées.</p>
                        </div>
                    <% } %>
                </div>

                <!-- Actions rapides -->
                <div class="quick-actions">
                    <h3>Actions rapides</h3>
                    <div class="actions-grid">
                        <a href="/demande" class="action-card">
                            <div class="action-icon">
                                <i class="fas fa-plus"></i>
                            </div>
                            <div class="action-content">
                                <h4>Nouvelle demande</h4>
                                <p>Démarrer une nouvelle demande de financement</p>
                            </div>
                        </a>
                        <a href="/simulation" class="action-card">
                            <div class="action-icon">
                                <i class="fas fa-calculator"></i>
                            </div>
                            <div class="action-content">
                                <h4>Simulation</h4>
                                <p>Simuler votre capacité d'emprunt</p>
                            </div>
                        </a>
                        <a href="/dashboard/documents" class="action-card">
                            <div class="action-icon">
                                <i class="fas fa-file-upload"></i>
                            </div>
                            <div class="action-content">
                                <h4>Mes documents</h4>
                                <p>Gérer vos documents</p>
                            </div>
                        </a>
                        <a href="mailto:support@nexloan.fr" class="action-card">
                            <div class="action-icon">
                                <i class="fas fa-headset"></i>
                            </div>
                            <div class="action-content">
                                <h4>Support</h4>
                                <p>Contacter notre équipe</p>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal pour les détails de demande -->
    <div id="demandeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Détails de la demande</h3>
                <button class="modal-close" onclick="closeDemandeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="demandeDetails">
                <!-- Contenu dynamique -->
            </div>
        </div>
    </div>

    <script>
        // User menu toggle
        function toggleUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            const userMenu = document.querySelector('.user-menu');
            dropdown.classList.toggle('show');
            userMenu.classList.toggle('active');
        }

        // Close user menu when clicking outside
        document.addEventListener('click', function(event) {
            const userMenu = document.querySelector('.user-menu');
            if (!userMenu.contains(event.target)) {
                document.getElementById('userDropdown').classList.remove('show');
                userMenu.classList.remove('active');
            }
        });

        // Modal functions
        function showDemandeDetails(demandeId) {
            // Ici vous pourriez faire un appel AJAX pour récupérer les détails
            // Pour l'instant, on affiche un contenu statique
            const modal = document.getElementById('demandeModal');
            const details = document.getElementById('demandeDetails');
            
            details.innerHTML = `
                <div class="demande-detail">
                    <h4>Informations générales</h4>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <span class="label">Numéro de dossier</span>
                            <span class="value">NL-2024-000001</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Type de projet</span>
                            <span class="value">Achat résidence principale</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Montant demandé</span>
                            <span class="value">250 000 €</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Durée souhaitée</span>
                            <span class="value">25 ans</span>
                        </div>
                    </div>
                    
                    <h4>Statut actuel</h4>
                    <div class="status-timeline">
                        <div class="timeline-item completed">
                            <div class="timeline-icon">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="timeline-content">
                                <h5>Demande soumise</h5>
                                <p>15/03/2024 - 14:30</p>
                            </div>
                        </div>
                        <div class="timeline-item active">
                            <div class="timeline-icon">
                                <i class="fas fa-search"></i>
                            </div>
                            <div class="timeline-content">
                                <h5>Analyse en cours</h5>
                                <p>Votre dossier est actuellement en cours d'analyse par nos experts</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-icon">
                                <i class="fas fa-handshake"></i>
                            </div>
                            <div class="timeline-content">
                                <h5>Négociation</h5>
                                <p>À venir</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            modal.style.display = 'block';
        }

        function closeDemandeModal() {
            document.getElementById('demandeModal').style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('demandeModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }
    </script>

    <style>
        /* Demandes Page Styles */
        .demandes-main {
            padding: 120px 0 80px;
            background: #f9fafb;
            min-height: 100vh;
        }

        .demandes-header {
            margin-bottom: 3rem;
        }

        .demandes-breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #6b7280;
        }

        .demandes-breadcrumb a {
            color: #00966a;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .demandes-breadcrumb a:hover {
            text-decoration: underline;
            color: #007a56;
        }

        .demandes-breadcrumb i {
            font-size: 0.7rem;
        }

        .demandes-header h1 {
            font-size: 2.5rem;
            color: #1f2937;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .demandes-header p {
            color: #6b7280;
            font-size: 1.1rem;
        }

        .demandes-content {
            display: flex;
            flex-direction: column;
            gap: 4rem;
        }

        .demandes-section {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            border: 1px solid #e5e7eb;
        }

        .section-header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f3f4f6;
        }

        .section-header h2 {
            display: flex;
            align-items: center;
            gap: 12px;
            color: #1f2937;
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .section-header i {
            color: #00966a;
            font-size: 1.5rem;
        }

        .count-badge {
            background: #00966a;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-left: 8px;
        }

        .section-header p {
            color: #6b7280;
            font-size: 1rem;
        }

        .demandes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
        }

        .demande-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            border: 2px solid #e5e7eb;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .demande-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            transition: transform 0.3s ease;
        }

        .demande-card.en-cours::before {
            background: linear-gradient(90deg, #f59e0b, #d97706);
        }

        .demande-card.acceptee::before {
            background: linear-gradient(90deg, #00966a, #007a56);
        }

        .demande-card.refusee::before {
            background: linear-gradient(90deg, #dc2626, #b91c1c);
        }

        .demande-card.annulee::before {
            background: linear-gradient(90deg, #6b7280, #4b5563);
        }

        .demande-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
            border-color: #00966a;
        }

        .demande-card:hover::before {
            transform: scaleX(1);
        }

        .demande-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }

        .demande-number {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #1f2937;
            font-size: 1.1rem;
        }

        .demande-number i {
            color: #00966a;
        }

        .status-badge {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .status-en-cours {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            color: #d97706;
            border: 2px solid #fbbf24;
        }

        .status-acceptee {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            color: #00966a;
            border: 2px solid #bbf7d0;
        }

        .status-refusee {
            background: linear-gradient(135deg, #fef2f2, #fee2e2);
            color: #dc2626;
            border: 2px solid #fecaca;
        }

        .status-annulee {
            background: linear-gradient(135deg, #f9fafb, #f3f4f6);
            color: #6b7280;
            border: 2px solid #d1d5db;
        }

        .demande-content {
            margin-bottom: 1.5rem;
        }

        .demande-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .info-item .label {
            color: #6b7280;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .info-item .value {
            color: #1f2937;
            font-weight: 600;
            font-size: 1rem;
        }

        .demande-progress {
            margin-bottom: 1.5rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00966a, #007a56);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            flex: 1;
            position: relative;
        }

        .step i {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            background: #e5e7eb;
            color: #9ca3af;
            transition: all 0.3s ease;
        }

        .step.completed i {
            background: #00966a;
            color: white;
        }

        .step.active i {
            background: #f59e0b;
            color: white;
            animation: pulse 2s infinite;
        }

        .step span {
            font-size: 0.8rem;
            color: #6b7280;
            text-align: center;
            font-weight: 500;
        }

        .step.completed span,
        .step.active span {
            color: #1f2937;
            font-weight: 600;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        .demande-result {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 1rem;
        }

        .demande-result.success {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
        }

        .demande-result.error {
            background: #fef2f2;
            border: 1px solid #fecaca;
        }

        .demande-result i {
            font-size: 1.5rem;
        }

        .demande-result.success i {
            color: #00966a;
        }

        .demande-result.error i {
            color: #dc2626;
        }

        .demande-result h4 {
            margin-bottom: 4px;
            font-size: 1rem;
            font-weight: 600;
        }

        .demande-result.success h4 {
            color: #00966a;
        }

        .demande-result.error h4 {
            color: #dc2626;
        }

        .demande-result p {
            color: #6b7280;
            font-size: 0.9rem;
            margin: 0;
        }

        .demande-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .empty-state {
            text-align: center;
            padding: 3rem 2rem;
            color: #6b7280;
        }

        .empty-icon {
            width: 80px;
            height: 80px;
            background: #f3f4f6;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 2rem;
            color: #9ca3af;
        }

        .empty-state h3 {
            color: #1f2937;
            margin-bottom: 0.5rem;
            font-size: 1.5rem;
        }

        .empty-state p {
            margin-bottom: 2rem;
            font-size: 1rem;
        }

        .quick-actions {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            border: 1px solid #e5e7eb;
        }

        .quick-actions h3 {
            color: #1f2937;
            margin-bottom: 2rem;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .action-card {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem;
            background: #f9fafb;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .action-card:hover {
            background: #f3f4f6;
            border-color: #00966a;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 150, 106, 0.1);
        }

        .action-icon {
            width: 50px;
            height: 50px;
            background: #00966a;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .action-content h4 {
            color: #1f2937;
            margin-bottom: 4px;
            font-size: 1rem;
            font-weight: 600;
        }

        .action-content p {
            color: #6b7280;
            font-size: 0.9rem;
            margin: 0;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 16px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .modal-header h3 {
            color: #1f2937;
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #6b7280;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: #f3f4f6;
            color: #1f2937;
        }

        .modal-body {
            padding: 2rem;
        }

        .demande-detail h4 {
            color: #1f2937;
            margin-bottom: 1rem;
            font-size: 1.2rem;
            font-weight: 600;
            border-bottom: 2px solid #f3f4f6;
            padding-bottom: 0.5rem;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .detail-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .detail-item .label {
            color: #6b7280;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .detail-item .value {
            color: #1f2937;
            font-weight: 600;
            font-size: 1rem;
        }

        .status-timeline {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .timeline-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1rem;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .timeline-item.completed {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
        }

        .timeline-item.active {
            background: #fef3c7;
            border: 1px solid #fbbf24;
        }

        .timeline-item:not(.completed):not(.active) {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
        }

        .timeline-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .timeline-item.completed .timeline-icon {
            background: #00966a;
            color: white;
        }

        .timeline-item.active .timeline-icon {
            background: #f59e0b;
            color: white;
        }

        .timeline-item:not(.completed):not(.active) .timeline-icon {
            background: #e5e7eb;
            color: #9ca3af;
        }

        .timeline-content h5 {
            color: #1f2937;
            margin-bottom: 4px;
            font-size: 1rem;
            font-weight: 600;
        }

        .timeline-content p {
            color: #6b7280;
            font-size: 0.9rem;
            margin: 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .demandes-main {
                padding: 100px 0 60px;
            }

            .demandes-header h1 {
                font-size: 2rem;
            }

            .demandes-grid {
                grid-template-columns: 1fr;
            }

            .demande-card {
                padding: 1.5rem;
            }

            .demande-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .demande-info {
                grid-template-columns: 1fr;
            }

            .progress-steps {
                flex-direction: column;
                gap: 1rem;
            }

            .step {
                flex-direction: row;
                justify-content: flex-start;
                text-align: left;
            }

            .demande-actions {
                flex-direction: column;
            }

            .actions-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                margin: 10% auto;
                width: 95%;
            }

            .modal-header,
            .modal-body {
                padding: 1.5rem;
            }

            .detail-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .demandes-section {
                padding: 2rem 1.5rem;
            }

            .section-header h2 {
                font-size: 1.5rem;
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .count-badge {
                margin-left: 0;
            }
        }
    </style>
</body>
</html>
